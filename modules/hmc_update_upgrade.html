

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>hmc_update_upgrade – Manages the update and upgrade of the HMC &mdash; IBM Power Systems HMC 1.0.0-beta1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="power_system – PowerOn, PowerOff, modify_syscfg, modify_hwres, facts of the Managed system" href="power_system.html" />
    <link rel="prev" title="hmc_pwdpolicy – Manages the list, create, change and remove password policies of the HMC" href="hmc_pwdpolicy.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> IBM Power Systems HMC
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html#module-reference">Module reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hmc_pwdpolicy.html">hmc_pwdpolicy – Manages the list, create, change and remove password policies of the HMC</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">hmc_update_upgrade – Manages the update and upgrade of the HMC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="power_system.html">power_system – PowerOn, PowerOff, modify_syscfg, modify_hwres, facts of the Managed system</a></li>
<li class="toctree-l3"><a class="reference internal" href="powervm_lpar_instance.html">powervm_lpar_instance – Create, Delete, Shutdown, Activate, Restart and facts of an AIX/Linux or IBMi partition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks.html">Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo.html">Demo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html#helpful-links">Helpful Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Requirements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Releases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBM Power Systems HMC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../modules.html">Modules</a> &raquo;</li>
        
      <li>hmc_update_upgrade – Manages the update and upgrade of the HMC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/IBM/ansible-power-hmc/blob/dev-collection/docs/source/modules/hmc_update_upgrade.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hmc-update-upgrade-manages-the-update-and-upgrade-of-the-hmc">
<span id="hmc-update-upgrade-module"></span><h1>hmc_update_upgrade – Manages the update and upgrade of the HMC<a class="headerlink" href="#hmc-update-upgrade-manages-the-update-and-upgrade-of-the-hmc" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id2">Requirements</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id3">Parameters</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id4">Notes</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p></li>
<li><p><a class="reference internal" href="#return-values" id="id6">Return Values</a></p></li>
<li><p><a class="reference internal" href="#status" id="id7">Status</a></p></li>
</ul>
</div>
<div class="section" id="synopsis">
<h2><a class="toc-backref" href="#id1">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>Updates the HMC by installing a corrective service package located on an FTP/SFTP/NFS server/Ansible Controller Node/HMC hard disk.</p>
<p>Upgrades the HMC by obtaining  the required  files  from a remote server or from the HMC hard disk. The files are transferred onto a special partition on the HMC hard disk. After the files have been transferred, HMC will boot from this partition and perform the upgrade.</p>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li><p>Python &gt;= 3</p></li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id3">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl>
<dt>hmc_host (True, str, None)</dt><dd><p>The IPaddress or hostname of the HMC.</p>
</dd>
<dt>hmc_auth (True, dict, None)</dt><dd><p>Username and Password credential of the HMC.</p>
<dl class="simple">
<dt>username (True, str, None)</dt><dd><p>Username of the HMC to login.</p>
</dd>
<dt>password (optional, str, None)</dt><dd><p>Password of the HMC.</p>
</dd>
</dl>
</dd>
<dt>build_config (False, dict, None)</dt><dd><p>Configuration parameters required for the HMC update/upgrade.</p>
<dl>
<dt>location_type (True, str, None)</dt><dd><p>The type of location which contains the corrective service ISO image. Valid values are <code class="docutils literal notranslate"><span class="pre">disk</span></code> for the HMC hard disk, <code class="docutils literal notranslate"><span class="pre">ftp</span></code> for an FTP site, <code class="docutils literal notranslate"><span class="pre">sftp</span></code> for a secure FTP (SFTP) site, <code class="docutils literal notranslate"><span class="pre">nfs</span></code> for an NFS file system.</p>
<p>When the location type is set to <code class="docutils literal notranslate"><span class="pre">disk</span></code>, first it looks for the <code class="docutils literal notranslate"><span class="pre">build_file</span></code> in HMC hard disk if it doesn’t exist then it looks for <code class="docutils literal notranslate"><span class="pre">build_file</span></code> in the Ansible Controller node.</p>
</dd>
<dt>hostname (optional, str, None)</dt><dd><p>The hostname or IPaddress of the remote server where the corrective service ISO image is located.</p>
</dd>
<dt>userid (optional, str, None)</dt><dd><p>The user ID to use to log in to the remote FTP or SFTP server. This option is required when the ISO image is located on a remote FTP or SFTP server Otherwise, this option is not valid.</p>
</dd>
<dt>passwd (optional, str, None)</dt><dd><p>The password to use to log in to the remote FTP or SFTP server. The <em>passwd</em> and <em>sshkey</em> options are mutually exclusive in case if <em>location_type=sftp</em>. This option is only valid when the ISO image is located on a remote FTP or SFTP server.</p>
</dd>
<dt>sshkey_file (optional, str, None)</dt><dd><p>The name of the file that contains the SSH private key. This option is only valid if <em>location_type=sftp</em>.</p>
</dd>
<dt>mount_location (optional, str, None)</dt><dd><p>The mount location defined on the NFS server where the corrective service ISO image is located. This option is valid only if <em>location_type=nfs</em>.</p>
</dd>
<dt>build_file (optional, str, None)</dt><dd><p>The name of the corrective service ISO image file. This  option  is required when the ISO image is located on any of the following locations HMC hard disk, Ansible controller node filesystem, remote FTP, SFTP, or NFS server. During upgrade of the HMC, this option represents the host path where the network install image is kept. During update of the HMC if <em>location_type=disk</em> and ISO image is kept in Ansible controller node or HMC hard disk, this option should be provided with the ansible control node path in which ISO file or network install image is kept.</p>
</dd>
</dl>
</dd>
<dt>state (True, str, None)</dt><dd><p>The desired build state of the target HMC.</p>
<p><code class="docutils literal notranslate"><span class="pre">facts</span></code> does not change anything on the HMC and returns current driver/build level of HMC.</p>
<p><code class="docutils literal notranslate"><span class="pre">updated</span></code> ensures the target HMC is updated with given corrective service ISO image.</p>
<p><code class="docutils literal notranslate"><span class="pre">upgraded</span></code> ensures the target HMC is upgraded with given upgrade files.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id4">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Upgrade with <em>location_type=disk</em> will not support for V8 R870 and V9 R1 M910 release of the HMC</p></li>
<li><p>Update with <em>location_type=disk</em> and <em>build_file</em> in the HMC local path won’t remove the file after update.</p></li>
<li><p>Module will not satisfy the idempotency requirement of Ansible, even though it partially confirms it. For instance, if the module is tasked to update/upgrade the HMC to the same level, it will still go ahead with the operation and finally the changed state will be reported as false.</p></li>
</ul>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">List the HMC current build level</span>
  <span class="nt">hmc_update_upgrade</span><span class="p">:</span>
      <span class="nt">hmc_host</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">inventory_hostname</span> <span class="cp">}}</span><span class="s">&#39;</span>
      <span class="nt">hmc_auth</span><span class="p">:</span>
         <span class="nt">username</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_user</span> <span class="cp">}}</span><span class="s">&#39;</span>
         <span class="nt">password</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">hmc_password</span> <span class="cp">}}</span><span class="s">&#39;</span>
      <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">facts</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Update the HMC to the V9R1M941 build level from nfs location</span>
  <span class="nt">hmc_update_upgrade</span><span class="p">:</span>
      <span class="nt">hmc_host</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">inventory_hostname</span> <span class="cp">}}</span><span class="s">&#39;</span>
      <span class="nt">hmc_auth</span><span class="p">:</span>
         <span class="nt">username</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_user</span> <span class="cp">}}</span><span class="s">&#39;</span>
         <span class="nt">password</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">hmc_password</span> <span class="cp">}}</span><span class="s">&#39;</span>
      <span class="nt">build_config</span><span class="p">:</span>
          <span class="nt">location_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nfs</span>
          <span class="nt">hostname</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;NFS_Server_IP/Hostname&gt;</span>
          <span class="nt">build_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/Images/HMC_Update_V9R1M941_x86.iso</span>
          <span class="nt">mount_location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/HMCImages</span>
      <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">updated</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Update the HMC to the V9R1M941 build level from sftp location</span>
  <span class="nt">hmc_update_upgrade</span><span class="p">:</span>
      <span class="nt">hmc_host</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">inventory_hostname</span> <span class="cp">}}</span><span class="s">&#39;</span>
      <span class="nt">hmc_auth</span><span class="p">:</span>
         <span class="nt">username</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">ansible_user</span> <span class="cp">}}</span><span class="s">&#39;</span>
         <span class="nt">password</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">hmc_password</span> <span class="cp">}}</span><span class="s">&#39;</span>
      <span class="nt">build_config</span><span class="p">:</span>
          <span class="nt">location_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sftp</span>
          <span class="nt">hostname</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;SFTP_Server_IP/Hostname&gt;</span>
          <span class="nt">userid</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;SFTP_Server_Username&gt;</span>
          <span class="nt">passwd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;SFTP_Server_Password&gt;</span>
          <span class="nt">build_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/Images/HMC_Update_V9R1M941_x86.iso</span>
      <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">updated</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values">
<h2><a class="toc-backref" href="#id6">Return Values</a><a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>build_info (always, dict, )</dt><dd><p>Respective build information</p>
</dd>
</dl>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id7">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em></p></li>
<li><p>This module is maintained by community.</p></li>
</ul>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Anil Vijayan (&#64;AnilVijayan)</p></li>
<li><p>Navinakumar Kandakur (&#64;nkandak1)</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="power_system.html" class="btn btn-neutral float-right" title="power_system – PowerOn, PowerOff, modify_syscfg, modify_hwres, facts of the Managed system" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hmc_pwdpolicy.html" class="btn btn-neutral float-left" title="hmc_pwdpolicy – Manages the list, create, change and remove password policies of the HMC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, IBM.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>