<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>powervm_inventory – HMC-based inventory source for Power Servers &mdash; IBM Power Systems HMC 1.0.0-beta1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Playbooks" href="../playbooks.html" />
    <link rel="prev" title="Plugins" href="../plugins.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> IBM Power Systems HMC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../plugins.html">Plugins</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../plugins.html#plugin-reference">Plugin reference</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">powervm_inventory – HMC-based inventory source for Power Servers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks.html">Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo.html">Demo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html#helpful-links">Helpful Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Requirements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Releases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBM Power Systems HMC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../plugins.html">Plugins</a></li>
      <li class="breadcrumb-item active">powervm_inventory – HMC-based inventory source for Power Servers</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/IBM/ansible-power-hmc/blob/dev-collection/docs/source/plugins/powervm_inventory.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="powervm-inventory-hmc-based-inventory-source-for-power-servers">
<span id="powervm-inventory-module"></span><h1>powervm_inventory – HMC-based inventory source for Power Servers<a class="headerlink" href="#powervm-inventory-hmc-based-inventory-source-for-power-servers" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id6">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id7">Requirements</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id8">Parameters</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id9">Examples</a></p></li>
<li><p><a class="reference internal" href="#status" id="id10">Status</a></p></li>
</ul>
</div>
<section id="synopsis">
<h2><a class="toc-backref" href="#id6">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this heading"></a></h2>
<p>This plugin utilizes HMC APIs to build a dynamic inventory of defined partitions (LPAR, VIOS) and Power Servers. Inventory sources must be structured as <a href="#id1"><span class="problematic" id="id2">*</span></a>.power_hmc.yml or <a href="#id3"><span class="problematic" id="id4">*</span></a>.power_hmc.yaml.</p>
<p>To create a usable Ansible host for a given LPAR or Power Server, the IP or hostname of the LPAR or Power Server must be exposed through the HMC in some way. Currently there are only two such sources supported by this plugin, either an RMC IP address(not valid for IBMi partition) or the name of the LPAR or Power Server must be also a valid hostname.</p>
<p>Valid LPAR/VIOS properties that can be used for groups, keyed groups, filters, unknown partition identification, and composite variables can be found in the HMC REST API documentation. By default, valid properties include those listed as “Quick Properties”, but if <cite>advanced_fields</cite> are enabled, you may be able to use more advanced properties of the partition. Further information about the LPAR APIs can be found in the <a class="reference external" href="https://www.ibm.com/support/knowledgecenter/9040-MR9/p9ehl/apis/LogicalPartition.htm">Knowledge Center</a>.</p>
<p>Valid Power Server properties that can be used for system_groups, system_keyed_groups, system_filters and system_composit variables can be found in HMC REST API documentation listed as ‘Quick Properties’. (These options works only when <cite>group_lpars_by_managed_system</cite> option set to false) <a class="reference external" href="https://www.ibm.com/support/knowledgecenter/9040-MR9/p9ehl/apis/ManagedSystem.htm'">Knowledge Center</a>.</p>
<p>Apart from properties defined in HMC REST API Documentation we can use the following properties also with Power Server, and LPAR/VIOS ‘AssociatedGroups’ (Tagged group name), ‘AssociatedHMC’ (HMC IP/Hostname), ‘AssociatedHMCUserName’ (HMC username) for LPAR/VIOS or Power server grouping and compose.</p>
<p>If a property is used in the inventory source that is unique to a partition type, only partitions for which that property is defined may be included. Non-compatible partitions can be filtered out by <cite>OperatingSystemVersion</cite> or <cite>PartitionType</cite> as detailed in the second example.</p>
<p>A group named ‘MaagedSystems’ gets created with all the Power Server Managed by the HMC and Power Server grouping features enables only when <cite>group_lpars_by_managed_system</cite> option set to false in the dynamic inventory playbook.</p>
</section>
<section id="requirements">
<h2><a class="toc-backref" href="#id7">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li><p>Python &gt;= 3</p></li>
</ul>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id8">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
<blockquote>
<div><dl>
<dt>hmc_hosts (True, list, None)</dt><dd><p>A List of hosts and their associated usernames and passwords.</p>
</dd>
<dt>filters (optional, any, {})</dt><dd><p>A key value pair for filtering by various LPAR/VIOS attributes. Only results matching the filter will be included in the inventory.</p>
</dd>
<dt>system_filters (optional, any, {})</dt><dd><p>A key value pair for filtering by various Power Server attributes. Results include only system_filter matching Power Servers and LPAR/VIOS belongs to it.</p>
</dd>
<dt>compose (optional, dict, {})</dt><dd><p>Create vars from Jinja2 expressions(Valid only for LPAR or VIOS).</p>
</dd>
<dt>system_compose (optional, dict, {})</dt><dd><p>Create vars from Jinja2 expressions(Valid only for Power Server).</p>
</dd>
<dt>groups (optional, dict, {})</dt><dd><p>Add LPAR or VIOS hosts to group based on Jinja2 conditionals.</p>
</dd>
<dt>system_groups (optional, dict, {})</dt><dd><p>Add Power Server hosts to group based on Jinja2 conditionals.</p>
</dd>
<dt>keyed_groups (optional, list, None)</dt><dd><p>Add LPAR or VIOS hosts to group based on the values of a variable.</p>
</dd>
<dt>system_keyed_groups (optional, list, None)</dt><dd><p>Add Power Server hosts to group based on the values of a variable.</p>
</dd>
<dt>exclude_ip (optional, list, None)</dt><dd><p>A list of IP addresses to exclude from the inventory. This will be compared to the IP address specified in the HMC. Currently, no hostname lookup is performed, so only IP addresses that match the IP address specified in the HMC will be excluded. This is not valid for IBMi LPARs.</p>
</dd>
<dt>exclude_lpar (optional, list, None)</dt><dd><p>A list of partitions (LPAR, VIOS) to exclude by partition name.</p>
</dd>
<dt>exclude_system (optional, list, None)</dt><dd><p>A list of HMC managed Power Server and their partitions (LPAR, VIOS) will be excluded from the dynamic inventory. Works only with HMC Discovered Power Server name.</p>
</dd>
<dt>ansible_display_name (optional, str, name)</dt><dd><p>By default, partitions/Power Servers name will be used as the name displayed by Ansible in output. If you wish this to display the IP address instead you may set this to “ip”.</p>
</dd>
<dt>ansible_host_type (optional, str, ip)</dt><dd><p>Determines if the IP Address or the LPAR/Power Server name will be used as the “ansible_host” variable in playbooks.</p>
</dd>
<dt>advanced_fields (optional, bool, False)</dt><dd><p>Allows for additional LPAR/VIOS properties to be used for the purposes of grouping and filtering.</p>
<p>Retrieving these properties could increase dynamic inventory generation run time, depending on the size of your environment and the properties to be fetched.</p>
</dd>
<dt>group_lpars_by_managed_system (optional, bool, True)</dt><dd><p>Creates a grouping of partitions by managed system name. This is enabled by default.</p>
<p>This option should be set to false to enable Power Server grouping feature.</p>
</dd>
<dt>identify_unknown_by (optional, str, omit)</dt><dd><p>Allows you to include partitions unable to be automatically detected as a valid Ansible target.</p>
<p>By default, Aix/Linux partitions without IP’s and IBMi partitions in not running state are omitted from the inventory. This is not be the case in the event you have name set for ansible_host_type. If not, omitted partitions will be added to a group called “unknown” and will can be identified by any LPAR property of your choosing (PartitionName or UUID are common identifiers).</p>
<p>If you do not omit unknown partitions, you may run into issues targeting groups that include them. To avoid this, you can specify a host pattern in a playbooks such as <cite>targetgroup:!unknown</cite>. This will your playbook to run against all known hosts in your target group.</p>
<p>This is not valid for Power Servers.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="examples">
<h2><a class="toc-backref" href="#id9">Examples</a><a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># The most minimal example, targeting only a single HMC</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Password&gt;</span><span class="w"></span>

<span class="c1"># Create an inventory consisting of only Virtual IO Servers.</span><span class="w"></span>
<span class="c1"># This may be important if grouping by advanced_fields exclusive to VIOS.</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Password&gt;</span><span class="w"></span>
<span class="nt">filters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">PartitionType</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Virtual</span><span class="nv"> </span><span class="s">IO</span><span class="nv"> </span><span class="s">Server&#39;</span><span class="w"></span>

<span class="c1"># Target multiple HMC hosts and only add running partitions to the inventory</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC1_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC1_Password&gt;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Password&gt;</span><span class="w"></span>
<span class="nt">filters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">PartitionState</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;running&#39;</span><span class="w"></span>

<span class="c1"># Generate an inventory of all running partitions and create a separate group for AIX 7.2 and IBMi type of partitions</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC1_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC1_Password&gt;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Password&gt;</span><span class="w"></span>
<span class="nt">filters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">PartitionState</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;running&#39;</span><span class="w"></span>
<span class="nt">groups</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">AIX_72</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;7.2&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">OperatingSystemVersion&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">IBMi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;IBM&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">OperatingSystemVersion&quot;</span><span class="w"></span>

<span class="c1"># Generate an inventory of running partitions and group them by PartitionType with a prefix of type_</span><span class="w"></span>
<span class="c1"># Groups will be created will resemble &quot;type_Virtual_IO_Server&quot;, &quot;type_AIX_Linux&quot;, &quot;type_OS400&quot;, etc.</span><span class="w"></span>
<span class="c1"># Additionally, include the following variables as host_vars for a given target host: CurrentMemory, OperatingSystemVersion, PartitionName</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC1_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC1_Password&gt;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Password&gt;</span><span class="w"></span>
<span class="nt">filters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">PartitionState</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;running&#39;</span><span class="w"></span>
<span class="nt">keyed_groups</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="w"></span>
<span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PartitionType</span><span class="w"></span>
<span class="nt">compose</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">current_memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CurrentMemory</span><span class="w"></span>
<span class="w">  </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OperatingSystemVersion</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PartitionName</span><span class="w"></span>
<span class="w">  </span><span class="nt">HMCIP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AssociatedHMC</span><span class="w"></span>
<span class="w">  </span><span class="nt">HMCUSERNAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AssociatedHMCUserName</span><span class="w"></span>

<span class="c1">## Generate an inventory that excludes partitions by ip, name, or the name of managed system on which they run</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Password&gt;</span><span class="w"></span>
<span class="nt">exclude_ip</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.44</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.46</span><span class="w"></span>
<span class="nt">exclude_lpar</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aixlparnameX1</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aixlparnameX2</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vioslparnameX1</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vioslparnameX2</span><span class="w"></span>
<span class="nt">exclude_system</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Frame1-XXX-WWWWWW</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Frame2-XXX-WWWWWW</span><span class="w"></span>

<span class="c1"># Generate an inventory of operating Power Servers and group them by SystemType with a prefix of type_</span><span class="w"></span>
<span class="c1"># Groups will be created will resemble &quot;type_fsp&quot;, &quot;type_ebmc&quot;, etc.</span><span class="w"></span>
<span class="c1"># Additionally, include the following variables as host_vars for a given target host: MaximumPartitions, SystemFirmware, SystemName</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Password&gt;</span><span class="w"></span>
<span class="nt">group_lpars_by_managed_system</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">system_filters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">State</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;operating&#39;</span><span class="w"></span>
<span class="nt">system_keyed_groups</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="w"></span>
<span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SystemType</span><span class="w"></span>
<span class="nt">system_compose</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">maximum_partitions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MaximumPartitions</span><span class="w"></span>
<span class="w">  </span><span class="nt">system_firmware</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SystemFirmware</span><span class="w"></span>
<span class="w">  </span><span class="nt">HMCIP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AssociatedHMC</span><span class="w"></span>
<span class="w">  </span><span class="nt">HMCUSERNAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AssociatedHMCUserName</span><span class="w"></span>

<span class="c1"># Generate an inventory of all running partitions and operation Power Servers</span><span class="w"></span>
<span class="c1"># Create a seperate group for partitions tagged with associated group name &#39;production_lpars&#39;</span><span class="w"></span>
<span class="c1"># Create a seperate group for Power Servers tagged with associated group name &#39;Production_systems&#39;</span><span class="w"></span>
<span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm.power_hmc.powervm_inventory</span><span class="w"></span>
<span class="nt">hmc_hosts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hmc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hmc_host_name&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC2_Username&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;HMC_Password&gt;</span><span class="w"></span>
<span class="nt">group_lpars_by_managed_system</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">system_filters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">State</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;operating&#39;</span><span class="w"></span>
<span class="nt">groups</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ProductionLpars</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;production_lpars&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">AssociatedGroups&quot;</span><span class="w"></span>
<span class="nt">system_groups</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ProductionSystems</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;Production_systems&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">AssociatedGroups&quot;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="status">
<h2><a class="toc-backref" href="#id10">Status</a><a class="headerlink" href="#status" title="Permalink to this heading"></a></h2>
<section id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Torin Reilly (&#64;torinreilly)</p></li>
<li><p>Michael Cohoon (&#64;mtcohoon)</p></li>
<li><p>Ozzie Rodriguez (&#64;OzzieRodriguez)</p></li>
<li><p>Anil Vijayan (&#64;AnilVijayan)</p></li>
<li><p>Navinakumar Kandakur (&#64;nkandak1)</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../plugins.html" class="btn btn-neutral float-left" title="Plugins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../playbooks.html" class="btn btn-neutral float-right" title="Playbooks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, IBM.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>