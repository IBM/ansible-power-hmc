.. _firmware_update_module:


firmware_update -- Change firmware level on Managed Systems
===========================================================

.. contents::
   :local:
   :depth: 1


Synopsis
--------

Update/Upgrade a managed system.






Parameters
----------

  hmc_host (True, str, None)
    IP address or hostname of the HMC.


  hmc_auth (True, dict, None)
    Username and Password credential of the HMC.


    username (True, str, None)
      HMC username.


    password (optional, str, None)
      HMC password.



  system_name (True, str, None)
    The name of the managed system.


  repository (optional, str, ibmwebsite)
    The repository from which to retrieve the firmware updates. Valid values are ibmwebsite for the IBM service website, ftp for a remote FTP site, sftp for a remote secure FTP (SFTP) site


  remote_repo (optional, dict, None)
    When the image repository needs credentials to be accessed remotely.


    hostname (True, str, None)
      The hostname or IP address of the remote server where the firmware image is located.


    userid (True, str, None)
      The user ID to use to log in to the remote FTP or SFTP server. This option is required when the firmware image is located on a remote FTP or SFTP server Otherwise, this option is not valid.


    passwd (optional, str, None)
      The password to use to log in to the remote FTP or SFTP server. The \ :emphasis:`passwd`\  and \ :emphasis:`sshkey`\  options are mutually exclusive in case if \ :emphasis:`location\_type=sftp`\ . This option is only valid when the firmware image is located on a remote FTP or SFTP server.


    sshkey_file (optional, str, None)
      The name of the file that contains the SSH private key. This option is only valid if \ :emphasis:`location\_type=sftp`\ .


    directory (True, str, None)
      Location where the images are stored.



  level (optional, str, latest)
    Specify sss to retrieve a specific level of Managed System or Power LIC updates, even if disruptive. sss is the three character identifier of the specific level to retrieve. This is only valid when the LIC type is either Managed System only or Power only.

    Specify ccc,ppp to retrieve a specific level of Managed System and Power LIC updates, even if disruptive. ccc is the three character identifier of the specific level of Managed System LIC updates to retrieve. ppp is the three character identifier of the specific level of Power LIC updates to retrieve. This is only valid when the LIC type is both Managed System and Power.

    Specify release1\_level1,release2\_level2,... to retrieve specific levels of LIC updates, even if disruptive. The level specified in each entry indicates the desired level for all components which are running the release specified in the entry.


  state (optional, str, None)
    \ :literal:`updated`\  executes an update on target system.

    \ :literal:`upgraded`\  executes an upgrade on target system.


  action (optional, str, None)
    \ :literal:`accept`\  accepts firmware level for target system.





Notes
-----

.. note::
   - All operations support passwordless authentication.




Examples
--------

.. code-block:: yaml+jinja

    
    - name: Update to latest level with default values (latest at ibmwebsite).
      ibm.power_hmc.firmware_update:
          hmc_host: '{{ inventory_hostname }}'
          hmc_auth:
             username: '{{ ansible_user }}'
             password: '{{ hmc_password }}'
          system_name: <System name/mtms>
          state: updated

    - name: Upgrade system to specific level at an sftp repo.
      firmware_update:
        hmc_host: '{{ inventory_hostname }}'
        hmc_auth: '{{ curr_hmc_auth }}'
        system_name: <System name/mtms>
        repository: sftp
        remote_repo:
          hostname: 9.3.147.210
          userid: <user>
          passwd: <password>
          directory: /repo/images/
        level: 01VL941_047
        state: upgraded



Return Values
-------------

service_pack (always, str, FW940.20)
  The service pack representation of the system


level (always, str, 55)
  The specific level active on the system


ecnumber (always, str, 01VL940)
  The engineering change (EC) number associated with the firmware update





Status
------





Authors
~~~~~~~

- Mario Maldonado (@Mariomds)

